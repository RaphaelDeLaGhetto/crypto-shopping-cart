<% include header %>
<% include messages %>
<% if (cart && cart.items.length) { %>
  <table class="cart-table table table-bordered table-striped">
    <tbody>
      <% cart.items.forEach(function(product) { %>
        <tr>
          <td>
            <a href="/cart/remove/<%= product.id %><%= product.option ? `/${product.option}` : '' %>">
              <i class="fa fa-remove text-danger"></i>
            </a>
          </td>
          <td class="product-thumb">
            <img src="/images/products/<%= product.image %>" alt="" class="img-thumbnail img-responsive">
          </td>
          <td>
            <%= product.name %>
            <% if (product.option) { %>
              - <%= product.option %>
            <% } %>
          </td>
          <td>
            <%= product.formattedPrice %>
          </td>
        </tr>
      <% }); %>
      <tr class="info">
        <td colspan="5" class="text-right">
          <%= cart.formattedTotal %>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="incentives">
    <h3>
      Shipping is included!
    </h3>
    <h3>
      No accounts! No signups required!
    </h3>
    <img src="/images/Interac_e-Transfer_logo.png">
  </div>
  <div class="order-form">
    <form action="/cart/checkout" method="post" class="form-horizontal">
      <div class="form-group">
        <label for="recipient" class="control-label">Recipient's Name</label>
        <input type="text" name="recipient" class="form-control"
               id="recipient" value="<%- details.recipient %>" required>
      </div>
      <div class="form-group">
        <label for="street" class="control-label">Street Address</label>
        <input type="text" name="street" class="form-control"
               id="street" value="<%- details.street %>" required>
      </div>
      <div class="row">
        <div class="col-xs-6">
          <div class="form-group">
            <label for="city" class="control-label">City</label>
            <input type="text" name="city" class="form-control"
                   id="city" value="<%- details.city %>" required>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="form-group">
            <label for="province" class="control-label">Province/State</label>
            <input type="text" name="province" class="form-control"
                   id="province" value="<%- details.province %>" required>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-6">
          <div class="form-group">
            <label for="country" class="control-label">Country</label>
            <input type="text" name="country" class="form-control"
                   id="country" value="<%- details.country %>" required>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="form-group">
            <label for="postcode" class="control-label">Postal Code</label>
            <input type="text" name="postcode" class="form-control"
                   id="postcode" value="<%- details.postcode %>" required>
          </div>
        </div>
      </div>
      <div class="form-group form-check">
        <label for="contact" class="form-check-label">You will complete the transaction by email</label>
        <input class="form-control" type="email" name="email"
               placeholder="you@example.com (optional but recommended)"
               id="email" value="<%- details.email %>" >
      </div>
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Place Order</button>
      </div>
    </form>
  </div>
<% } else { %>
  <p class="alert alert-info">Your cart is empty</p>
<% } %>
<% include footer %>
